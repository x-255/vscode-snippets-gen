# 实施计划

- [x] 1. 设置测试基础设施和配置

  - 安装必要的测试依赖包 (jsdom, @testing-library/react, @testing-library/jest-dom, @testing-library/user-event)
  - 配置 Vitest 使用 jsdom 环境
  - 创建测试设置文件配置全局测试环境
  - _需求: 6.1, 6.3, 6.4_

- [x] 2. 创建测试工具和 Mock 基础设施

  - 实现 Monaco 编辑器的 Mock 模块
  - 创建剪贴板 API 的 Mock 实现
  - 设置 Ant Design 组件的测试配置
  - 创建通用测试工具函数和数据
  - _需求: 4.2, 4.3, 2.2_

- [x] 3. 实现数据转换函数的单元测试

  - 为 snippetData2vscodeJson 函数编写测试用例
  - 测试多行代码的正确分割处理
  - 测试不同前缀格式的处理 (字符串和数组)
  - 测试空数据和边界条件的处理
  - _需求: 3.1, 3.2, 3.3, 3.4_

- [x] 4. 实现作用范围数据的测试

  - 验证 scopeOptions 数据结构的完整性
  - 测试 Monaco 语言代码映射的正确性
  - 验证所有语言选项的有效性
  - _需求: 3.1_

- [x] 5. 实现 SnippetForm 组件的单元测试

  - 测试组件的基本渲染和所有输入字段的显示
  - 测试用户输入时的 onChange 回调函数调用
  - 测试作用范围选择时编辑器语言模式的更新
  - 测试触发词逗号分隔值的数组转换功能
  - _需求: 1.1, 1.2, 1.3, 1.4_

- [x] 6. 实现 SnippetResult 组件的单元测试

  - 测试 SnippetData 到 VSCode JSON 格式的正确转换显示
  - 测试复制按钮的点击功能和剪贴板写入
  - 测试复制成功后的状态变更和自动恢复
  - 测试空数据时的有效格式生成
  - _需求: 2.1, 2.2, 2.3, 2.4_

- [x] 7. 实现 Monaco 编辑器配置的单元测试

  - 测试 handleEditWillMount 函数的诊断选项设置
  - 测试 handleEditorDidMount 函数的主题应用
  - 测试代码补全提供器的注册和建议生成
  - 测试 $ 字符触发的代码段变量补全功能
  - _需求: 4.1, 4.2, 4.3, 4.4_

- [x] 8. 实现应用集成测试

  - 测试 App 组件的初始化和默认状态设置
  - 测试 SnippetForm 和 SnippetResult 之间的数据同步
  - 测试编程语言切换时的编辑器语法高亮更新
  - 测试完整的用户代码段创建流程
  - _需求: 5.1, 5.2, 5.3, 5.4_

- [x] 9. 配置测试覆盖率报告和优化

  - 配置 Vitest 覆盖率收集设置
  - 设置覆盖率阈值和报告格式
  - 运行完整测试套件并验证覆盖率目标
  - 优化测试性能和可靠性
  - _需求: 6.2_

- [x] 10. 完善测试文档和维护指南

  - 创建测试运行和调试的说明文档
  - 编写新功能测试的编写指南
  - 设置测试监视模式的配置说明
  - 验证所有测试在 CI 环境中的稳定运行
  - _需求: 6.4_
